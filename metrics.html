<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Metrics &mdash; Little Riak Core Book 1.0 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Little Riak Core Book 1.0 documentation" href="index.html" />
    <link rel="next" title="Riak Core Metadata" href="riak_core_metadata.html" />
    <link rel="prev" title="Ping as a Service (PaaS)" href="ping-as-a-service.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="metrics">
<h1>Metrics<a class="headerlink" href="#metrics" title="Permalink to this headline">¶</a></h1>
<div class="section" id="api-metrics">
<h2>API Metrics<a class="headerlink" href="#api-metrics" title="Permalink to this headline">¶</a></h2>
<p>Since this is meant to be a production system we can&#8217;t be far along until we
add metrics, for this we will use <a class="reference external" href="https://github.com/Feuerlabs/exometer">exometer</a> which is already a dependency of riak_core so we don&#8217;t need to add it.</p>
<p>We start by defining a <a class="reference external" href="https://github.com/marianoguerra/tanodb/blob/0ea3595aefce0f9098cb651eb33263933ce9d6e7/apps/tanodb/src/tanodb_metrics.erl">module named tanodb_metrics</a>.</p>
<p>The main functions we care about are :</p>
<dl class="docutils">
<dt><a class="reference external" href="https://github.com/marianoguerra/tanodb/blob/0ea3595aefce0f9098cb651eb33263933ce9d6e7/apps/tanodb/src/tanodb_metrics.erl#L16">init/0</a></dt>
<dd>which will initialize all the metrics when the app starts, we will add more metrics here as we add more features.</dd>
<dt><a class="reference external" href="https://github.com/marianoguerra/tanodb/blob/0ea3595aefce0f9098cb651eb33263933ce9d6e7/apps/tanodb/src/tanodb_metrics.erl#L14">core_ping/0</a></dt>
<dd>should be called to register metrics about calls to <a class="reference external" href="https://github.com/marianoguerra/tanodb/blob/0ea3595aefce0f9098cb651eb33263933ce9d6e7/apps/tanodb/src/tanodb.erl#L15">tanodb:ping/0</a></dd>
<dt><a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/0ea3595aefce0f9098cb651eb33263933ce9d6e7#diff-afa3f67ec87f742d64ee9ed311455777R8">all/0</a></dt>
<dd>returns the current status of all metrics.</dd>
</dl>
<p>To make the metrics actually work we need to call <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/0ea3595aefce0f9098cb651eb33263933ce9d6e7#diff-4477d4dd0aa2db0e274a56c9158207bdR13">tanodb_metrics:init/0</a> when we start the application and <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/0ea3595aefce0f9098cb651eb33263933ce9d6e7#diff-6f7251bf9e224ebabd766f0331b848adR16">tanodb_metrics:core_ping/0</a> each time tanodb:ping/0 is called.</p>
<div class="section" id="test-it">
<h3>Test It<a class="headerlink" href="#test-it" title="Permalink to this headline">¶</a></h3>
<p>Stop, build a release and run the server (I won&#8217;t tell you how from now on, check previous chapters to see how).</p>
<p>On the server shell run:</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">(tanodb@127.0.0.1)1&gt; tanodb_metrics:all().</span>
<span class="go">[{tanodb,[</span>

<span class="go"> ...</span>

<span class="go"> {core,[{ping,[{count,0},{one,0}]}]}]</span>

<span class="go">(tanodb@127.0.0.1)2&gt; tanodb:ping().</span>
<span class="go">{pong,593735040165679310520246963290989976735222595584}</span>

<span class="go">(tanodb@127.0.0.1)3&gt; tanodb_metrics:all().</span>
<span class="go">[{tanodb,[</span>

<span class="go"> ...</span>

<span class="go"> {core,[{ping,[{count,1},{one,1}]}]}]</span>

<span class="go">(tanodb@127.0.0.1)4&gt;</span>
</pre></div>
</div>
<p>The <cite>...</cite> are there to skip a lot of metrics about riak_core itself that
are quite useful but not important at this point.</p>
<p>Let&#8217;s see the shell session step by step, first we call tanodb_metrics:all()
and get the core ping metrics, in this case count and one are 0 since we
didn&#8217;t call ping yet.</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">(tanodb@127.0.0.1)1&gt; tanodb_metrics:all().</span>
<span class="go">[{tanodb,[</span>

<span class="go"> ...</span>

<span class="go"> {core,[{ping,[{count,0},{one,0}]}]}]</span>
</pre></div>
</div>
<p>Then we call ping once.</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">(tanodb@127.0.0.1)2&gt; tanodb:ping().</span>
<span class="go">{pong,593735040165679310520246963290989976735222595584}</span>
</pre></div>
</div>
<p>And ask for the metrics again, we can see that now it registered our call.</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">(tanodb@127.0.0.1)3&gt; tanodb_metrics:all().</span>
<span class="go">[{tanodb,[</span>

<span class="go"> ...</span>

<span class="go"> {core,[{ping,[{count,1},{one,1}]}]}]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="erlang-runtime-metrics">
<h2>Erlang Runtime Metrics<a class="headerlink" href="#erlang-runtime-metrics" title="Permalink to this headline">¶</a></h2>
<p>Until now we have metrics for riak_core and for our API, it would be useful to
have some metrics about the Erlang Runtime, like memory, GC, processes,
schedulers etc. For that we will use a really nice library called <a class="reference external" href="https://github.com/ferd/recon">recon</a> which unified all the information gathering behind
a nice API.</p>
<p>We start by <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/8d6535f360d24a1486bd7b1ed14d7fcde8c465bb#diff-31d7a50c99c265ca2793c20961b60979R6">adding recon as a dependency</a>,  then we <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/8d6535f360d24a1486bd7b1ed14d7fcde8c465bb#diff-afa3f67ec87f742d64ee9ed311455777R24">create the function tanodb_metrics:node_stats/0</a> and add it to <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/8d6535f360d24a1486bd7b1ed14d7fcde8c465bb#diff-afa3f67ec87f742d64ee9ed311455777R10">tanodb_metrics:all/0</a>.</p>
<div class="section" id="id1">
<h3>Test it<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<p>Stop, build a release and run. In the shell run:</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">(tanodb@127.0.0.1)1&gt; tanodb_metrics:all().</span>
<span class="go">[{tanodb,[</span>

<span class="go">    ...</span>

<span class="go"> {node,[{abs,[{process_count,377},</span>
<span class="go">              {run_queue,0},</span>
<span class="go">              {error_logger_queue_len,0},</span>
<span class="go">              {memory_total,30418240},</span>
<span class="go">              {memory_procs,11745496},</span>
<span class="go">              {memory_atoms,458994},</span>
<span class="go">              {memory_bin,232112},</span>
<span class="go">              {memory_ets,1470872}]},</span>
<span class="go">        {inc,[{bytes_in,11737},</span>
<span class="go">              {bytes_out,2470},</span>
<span class="go">              {gc_count,7},</span>
<span class="go">              {gc_words_reclaimed,29948},</span>
<span class="go">              {reductions,2601390},</span>
<span class="go">              {scheduler_usage,[{1,0.9291112866248371},</span>
<span class="go">                                {2,0.04754016011809648},</span>
<span class="go">                                {3,0.04615958261183974},</span>
<span class="go">                                {4,0.03682005933534583}]}]}]},</span>
<span class="go"> {core,[{ping,[{count,0},{one,0}]}]}]</span>
</pre></div>
</div>
<p>The metrics should be self explanatory, check <a class="reference external" href="http://ferd.github.io/recon/">the recon documentation</a> for details.</p>
</div>
</div>
<div class="section" id="web-server-metrics-cowboy">
<h2>Web Server Metrics (Cowboy)<a class="headerlink" href="#web-server-metrics-cowboy" title="Permalink to this headline">¶</a></h2>
<p>We will start with some generic web server metrics, you can add specific ones
with what you have learned in this chapter and by reading <a class="reference external" href="https://github.com/Feuerlabs/exometer/tree/master/doc">the exometer docs</a>.</p>
<p>For the generic metrics we will use <a class="reference external" href="https://github.com/marianoguerra/cowboy_exometer">cowboy_exometer</a> which is a module I just wrote since it was quite generic :)</p>
<p>We start by adding the <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/8fb792bc01ac58fbdc709a0c9d2f960605255e54#diff-31d7a50c99c265ca2793c20961b60979R7">cowboy_exometer dependency</a>, this module exposes a middleware and a response hook
to register metrics on all requests, for that we need to <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/8fb792bc01ac58fbdc709a0c9d2f960605255e54#diff-afa3f67ec87f742d64ee9ed311455777R20">initialize it providing the endpoints we care about</a> and when we want to collect the metrics we <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/8fb792bc01ac58fbdc709a0c9d2f960605255e54#diff-afa3f67ec87f742d64ee9ed311455777R11">call cowboy_exometer:stats/1 passing the same endpoints we passed on init</a>.</p>
<p>Finally we need to tell cowboy that we will <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/8fb792bc01ac58fbdc709a0c9d2f960605255e54#diff-4477d4dd0aa2db0e274a56c9158207bdR38">add a middleware and a response hook</a>.</p>
<div class="section" id="id2">
<h3>Test it<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>After all of this, stop, build, run and make some requests:</p>
<div class="highlight-sh"><div class="highlight"><pre>http localhost:8080/ping
</pre></div>
</div>
<p>and then on the node shell ask for the metrics:</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">(tanodb@127.0.0.1)1&gt; tanodb_metrics:all().</span>
<span class="go">[{tanodb,[</span>

<span class="go">    ...</span>

<span class="go"> {http,[{resp,[{by_code,[{200,[{count,1},{one,1}]},</span>
<span class="go">                         {201,[{count,0},{one,0}]},</span>
<span class="go">                         {202,[{count,0},{one,0}]},</span>
<span class="go">                         {203,[{count,0},{one,0}]},</span>
<span class="go">                         {204,[{count,0},{one,0}]},</span>
<span class="go">                         {205,[{count,0},{one,0}]},</span>
<span class="go">                         {206,[{count,0},{one,0}]},</span>
<span class="go">                         {300,[{count,0},{one,0}]},</span>
<span class="go">                         {301,[{count,0},{one,0}]},</span>
<span class="go">                         {302,[{count,0},{one,0}]},</span>
<span class="go">                         {303,[{count,0},{one,0}]},</span>
<span class="go">                         {304,[{count,0},{one,0}]},</span>
<span class="go">                         {305,[{count,0},{one,0}]},</span>
<span class="go">                         {306,[{count,0},{one,...}]},</span>
<span class="go">                         {307,[{count,...},{...}]},</span>
<span class="go">                         {308,[{...}|...]},</span>
<span class="go">                         {400,[...]},</span>
<span class="go">                         {401,...},</span>
<span class="go">                         {...}|...]}]},</span>
<span class="go">        {req,[{time,[{&lt;&lt;&quot;ping&quot;&gt;&gt;,</span>
<span class="go">                      [{n,3},</span>
<span class="go">                       {mean,44126},</span>
<span class="go">                       {min,44126},</span>
<span class="go">                       {max,44126},</span>
<span class="go">                       {median,44126},</span>
<span class="go">                       {50,0},</span>
<span class="go">                       {75,44126},</span>
<span class="go">                       {90,44126},</span>
<span class="go">                       {95,44126},</span>
<span class="go">                       {99,44126},</span>
<span class="go">                       {999,44126}]}]},</span>
<span class="go">              {active,[{value,0},{ms_since_reset,11546}]},</span>
<span class="go">              {count,[{&lt;&lt;&quot;ping&quot;&gt;&gt;,[{count,1},{one,1}]}]}]}]},</span>
<span class="go"> {node,[{abs,[{process_count,428},</span>
<span class="go">              {run_queue,0},</span>
<span class="go">              {error_logger_queue_len,0},</span>
<span class="go">              {memory_total,50301760},</span>
<span class="go">              {memory_procs,30854096},</span>
<span class="go">              {memory_atoms,471201},</span>
<span class="go">              {memory_bin,222648},</span>
<span class="go">              {memory_ets,1574728}]},</span>
<span class="go">        {inc,[{bytes_in,11737},</span>
<span class="go">              {bytes_out,2470},</span>
<span class="go">              {gc_count,6},</span>
<span class="go">              {gc_words_reclaimed,29747},</span>
<span class="go">              {reductions,2848780},</span>
<span class="go">              {scheduler_usage,[{1,0.05329944038387727},</span>
<span class="go">                                {2,0.8991375098414373},</span>
<span class="go">                                {3,0.03932163131802264},</span>
<span class="go">                                {4,0.05719991628720056}]}]}]},</span>
<span class="go"> {core,[{ping,[{count,1},{one,1}]}]}]</span>
</pre></div>
</div>
<p>You can see on this line that I made one request to ping and it returned 200:</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">{http,[{resp,[{by_code,[{200,[{count,1},{one,1}]},</span>
</pre></div>
</div>
<p>You can also see request time stats per endpoint:</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">{req,[{time,[{&lt;&lt;&quot;ping&quot;&gt;&gt;,</span>
<span class="go">              [{n,3},</span>
<span class="go">               {mean,44126},</span>
<span class="go">               {min,44126},</span>
<span class="go">               {max,44126},</span>
<span class="go">               {median,44126},</span>
<span class="go">               {50,0},</span>
<span class="go">               {75,44126},</span>
<span class="go">               {90,44126},</span>
<span class="go">               {95,44126},</span>
<span class="go">               {99,44126},</span>
<span class="go">               {999,44126}]}]},</span>
</pre></div>
</div>
<p>And request count by endpoint:</p>
<div class="highlight-erl"><div class="highlight"><pre><span class="go">{count,[{&lt;&lt;&quot;ping&quot;&gt;&gt;,[{count,1},{one,1}]}]}]}]},</span>
</pre></div>
</div>
</div>
<div class="section" id="exposing-metrics-as-a-rest-resource">
<h3>Exposing Metrics as a REST resource<a class="headerlink" href="#exposing-metrics-as-a-rest-resource" title="Permalink to this headline">¶</a></h3>
<p>This one will be simple, first we <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/de3dde8187ceefdeb787eb835a6e36e80528de6f#diff-4477d4dd0aa2db0e274a56c9158207bdR33">add the route to cowboy</a> then <a class="reference external" href="https://github.com/marianoguerra/tanodb/commit/de3dde8187ceefdeb787eb835a6e36e80528de6f#diff-afa3f67ec87f742d64ee9ed311455777R6">add the metrics endpoint to the list of endpoints we want to collect metrics</a> (metricception) and finally <a class="reference external" href="https://github.com/marianoguerra/tanodb/blob/de3dde8187ceefdeb787eb835a6e36e80528de6f/apps/tanodb/src/tanodb_http_metrics.erl">we implement the cowboy handler to return the json</a>.</p>
<div class="section" id="id3">
<h4>Test it<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p>Stop, build, start and make some requests:</p>
<div class="highlight-sh"><div class="highlight"><pre>http localhost:8080/ping
</pre></div>
</div>
<p>And then make a request for the metrics (result edited since it&#8217;s quite big):</p>
<div class="highlight-sh"><div class="highlight"><pre><span class="nv">$ </span>http localhost:8080/metrics

HTTP/1.1 <span class="m">200</span> OK
content-length: 8079
content-type: application/json
date: Fri, <span class="m">30</span> Oct <span class="m">2015</span> 10:39:27 GMT
server: Cowboy

<span class="o">{</span>
    <span class="s2">&quot;core&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;ping&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 2, <span class="s2">&quot;one&quot;</span>: <span class="m">1</span> <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">&quot;http&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;req&quot;</span>: <span class="o">{</span>
            <span class="s2">&quot;active&quot;</span>: <span class="o">{</span> <span class="s2">&quot;ms_since_reset&quot;</span>: 279958, <span class="s2">&quot;value&quot;</span>: <span class="m">1</span> <span class="o">}</span>,
            <span class="s2">&quot;count&quot;</span>: <span class="o">{</span>
                <span class="s2">&quot;metrics&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 1, <span class="s2">&quot;one&quot;</span>: <span class="m">0</span> <span class="o">}</span>,
                <span class="s2">&quot;ping&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 2, <span class="s2">&quot;one&quot;</span>: <span class="m">1</span> <span class="o">}</span>
            <span class="o">}</span>,
            <span class="s2">&quot;time&quot;</span>: <span class="o">{</span>
                <span class="s2">&quot;metrics&quot;</span>: <span class="o">{</span>
                    <span class="s2">&quot;50&quot;</span>: 0,
                    <span class="s2">&quot;75&quot;</span>: 0,
                    <span class="s2">&quot;90&quot;</span>: 0,
                    <span class="s2">&quot;95&quot;</span>: 0,
                    <span class="s2">&quot;99&quot;</span>: 0,
                    <span class="s2">&quot;999&quot;</span>: 0,
                    <span class="s2">&quot;max&quot;</span>: 0,
                    <span class="s2">&quot;mean&quot;</span>: 0,
                    <span class="s2">&quot;median&quot;</span>: 0,
                    <span class="s2">&quot;min&quot;</span>: 0,
                    <span class="s2">&quot;n&quot;</span>: 0
                <span class="o">}</span>,
                <span class="s2">&quot;ping&quot;</span>: <span class="o">{</span>
                    <span class="s2">&quot;50&quot;</span>: 0,
                    <span class="s2">&quot;75&quot;</span>: 349,
                    <span class="s2">&quot;90&quot;</span>: 349,
                    <span class="s2">&quot;95&quot;</span>: 349,
                    <span class="s2">&quot;99&quot;</span>: 349,
                    <span class="s2">&quot;999&quot;</span>: 349,
                    <span class="s2">&quot;max&quot;</span>: 349,
                    <span class="s2">&quot;mean&quot;</span>: 349,
                    <span class="s2">&quot;median&quot;</span>: 349,
                    <span class="s2">&quot;min&quot;</span>: 349,
                    <span class="s2">&quot;n&quot;</span>: 3
                <span class="o">}</span>
            <span class="o">}</span>
        <span class="o">}</span>,
        <span class="s2">&quot;resp&quot;</span>: <span class="o">{</span>
            <span class="s2">&quot;by_code&quot;</span>: <span class="o">{</span>
                <span class="s2">&quot;200&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 3, <span class="s2">&quot;one&quot;</span>: <span class="m">1</span> <span class="o">}</span>,
                <span class="s2">&quot;201&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 0, <span class="s2">&quot;one&quot;</span>: <span class="m">0</span> <span class="o">}</span>,
                ...
                <span class="s2">&quot;400&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 0, <span class="s2">&quot;one&quot;</span>: <span class="m">0</span> <span class="o">}</span>,
                <span class="s2">&quot;401&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 0, <span class="s2">&quot;one&quot;</span>: <span class="m">0</span> <span class="o">}</span>,
                ...
                <span class="s2">&quot;404&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 0, <span class="s2">&quot;one&quot;</span>: <span class="m">0</span> <span class="o">}</span>,
                ...
                <span class="s2">&quot;500&quot;</span>: <span class="o">{</span> <span class="s2">&quot;count&quot;</span>: 0, <span class="s2">&quot;one&quot;</span>: <span class="m">0</span> <span class="o">}</span>,
                ...
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">&quot;node&quot;</span>: <span class="o">{</span>
        <span class="s2">&quot;abs&quot;</span>: <span class="o">{</span>
            <span class="s2">&quot;error_logger_queue_len&quot;</span>: 0,
            <span class="s2">&quot;memory_atoms&quot;</span>: 471362,
            <span class="s2">&quot;memory_bin&quot;</span>: 224392,
            <span class="s2">&quot;memory_ets&quot;</span>: 1579592,
            <span class="s2">&quot;memory_procs&quot;</span>: 31886248,
            <span class="s2">&quot;memory_total&quot;</span>: 51342840,
            <span class="s2">&quot;process_count&quot;</span>: 432,
            <span class="s2">&quot;run_queue&quot;</span>: 0
        <span class="o">}</span>,
        <span class="s2">&quot;inc&quot;</span>: <span class="o">{</span>
            <span class="s2">&quot;bytes_in&quot;</span>: 0,
            <span class="s2">&quot;bytes_out&quot;</span>: 0,
            <span class="s2">&quot;gc_count&quot;</span>: 2,
            <span class="s2">&quot;gc_words_reclaimed&quot;</span>: 6624,
            <span class="s2">&quot;reductions&quot;</span>: 695770,
            <span class="s2">&quot;scheduler_usage&quot;</span>: <span class="o">{</span>
                <span class="s2">&quot;1&quot;</span>: 0.16108125753314584,
                <span class="s2">&quot;2&quot;</span>: 0.5187896583972728,
                <span class="s2">&quot;3&quot;</span>: 0.18046079477682214,
                <span class="s2">&quot;4&quot;</span>: 0.15292436095407036
            <span class="o">}</span>
        <span class="o">}</span>
    <span class="o">}</span>,
    <span class="s2">&quot;tanodb&quot;</span>: <span class="o">{</span>
        ...
    <span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Little Riak Core Book</a></h1>





<p>
<iframe src="https://ghbtns.com/github-btn.html?user=&repo=&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>


<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="starting.html">Starting</a></li>
<li class="toctree-l1"><a class="reference internal" href="ping-as-a-service.html">Ping as a Service (PaaS)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Metrics</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#api-metrics">API Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#erlang-runtime-metrics">Erlang Runtime Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="#web-server-metrics-cowboy">Web Server Metrics (Cowboy)</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="riak_core_metadata.html">Riak Core Metadata</a></li>
<li class="toctree-l1"><a class="reference internal" href="riak_core_security.html">Riak Core Security</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="ping-as-a-service.html" title="previous chapter">Ping as a Service (PaaS)</a></li>
      <li>Next: <a href="riak_core_metadata.html" title="next chapter">Riak Core Metadata</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Mariano Guerra.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.2.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/metrics.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>